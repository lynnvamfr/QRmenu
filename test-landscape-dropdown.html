<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Landscape Dropdown - Fish Hotpot</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        .test-info {
            background: #f0f8ff;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #007bff;
        }
        .test-info h2 {
            margin-top: 0;
            color: #007bff;
        }
        .test-info ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .test-info li {
            margin: 5px 0;
        }
        .test-button {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #218838;
        }
        .orientation-info {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #ffc107;
        }
        .current-orientation {
            font-weight: bold;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="test-info">
        <h2>üß™ Test Landscape Dropdown Feature</h2>
        <p><strong>M·ª•c ƒë√≠ch:</strong> Ki·ªÉm tra t√≠nh nƒÉng chuy·ªÉn ƒë·ªïi t·ª´ buttons sang dropdown khi ƒëi·ªán tho·∫°i n·∫±m ngang v√† c√≥ nhi·ªÅu h∆°n 3 options.</p>
        
        <h3>üìã H∆∞·ªõng d·∫´n test:</h3>
        <ul>
            <li><strong>M√≥n test:</strong> Fish Hotpot (c√≥ 6 options)</li>
            <li><strong>Desktop/Portrait:</strong> Hi·ªÉn th·ªã buttons (3 buttons/h√†ng)</li>
            <li><strong>Landscape (‚â§1024px):</strong> Chuy·ªÉn sang dropdown khi c√≥ >3 options</li>
            <li><strong>Landscape (‚â§1024px):</strong> V·∫´n hi·ªÉn th·ªã buttons khi c√≥ ‚â§3 options</li>
        </ul>
        
        <h3>üîß C√°ch test:</h3>
        <ul>
            <li>M·ªü Developer Tools (F12)</li>
            <li>Chuy·ªÉn sang ch·∫ø ƒë·ªô mobile</li>
            <li>Xoay m√†n h√¨nh sang landscape</li>
            <li>Click v√†o m√≥n "Fish Hotpot"</li>
            <li>Ki·ªÉm tra xem c√≥ hi·ªÉn th·ªã dropdown thay v√¨ buttons kh√¥ng</li>
        </ul>
    </div>

    <div class="orientation-info">
        <p><strong>Tr·∫°ng th√°i hi·ªán t·∫°i:</strong></p>
        <p class="current-orientation" id="orientation-status">ƒêang ki·ªÉm tra...</p>
        <p><strong>K√≠ch th∆∞·ªõc m√†n h√¨nh:</strong> <span id="screen-size">ƒêang ki·ªÉm tra...</span></p>
        <p><strong>S·ªë options:</strong> <span id="options-count">6 (Fish Hotpot)</span></p>
        <p><strong>K·∫øt qu·∫£ d·ª± ki·∫øn:</strong> <span id="expected-result">ƒêang ki·ªÉm tra...</span></p>
    </div>

    <button class="test-button" onclick="openFishHotpotModal()">üç≤ M·ªü Fish Hotpot Modal</button>
    <button class="test-button" onclick="checkOrientation()">üîÑ Ki·ªÉm tra Orientation</button>
    <button class="test-button" onclick="toggleOrientation()">üì± Chuy·ªÉn ƒë·ªïi Orientation</button>

    <!-- Modal Chi ti·∫øt M√≥n ƒÉn -->
    <div id="item-detail-modal" class="item-detail-modal">
        <div class="item-detail-content">
            <button class="item-detail-close" id="item-detail-close">&times;</button>
            <div class="item-detail-body" id="item-detail-body">
                <!-- N·ªôi dung s·∫Ω ƒë∆∞·ª£c t·∫°o b·ªüi JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // D·ªØ li·ªáu m√≥n Fish Hotpot ƒë·ªÉ test
        const fishHotpotItem = {
            "id": "fish_hotpot",
            "image": "images/hotpot.jpg",
            "priceType": "options",
            "unit": "1 pcs",
            "canBeSpicy": true,
            "options": [
                { "id": "fish_hotpot_ca_chim", "price": 150000, "size": "C√° Chim" },
                { "id": "fish_hotpot_ca_mam_thau", "price": 150000, "size": "C√° M√¢m Th√¢u" },
                { "id": "fish_hotpot_ca_bop", "price": 170000, "size": "C√° B·ªõp" },
                { "id": "fish_hotpot_ca_mu", "price": 200000, "size": "C√° M√∫" },
                { "id": "fish_hotpot_ca_duoi", "price": 200000, "size": "C√° ƒêu·ªëi" },
                { "id": "fish_hotpot_ca_cu", "price": 250000, "size": "C√° Cu" }
            ]
        };

        // Mock translations
        const translations = {
            'add_to_cart': 'Th√™m v√†o gi·ªè',
            'spicy_options.title': 'ƒê·ªô cay:',
            'spicy_options.not_spicy': 'Kh√¥ng cay',
            'spicy_options.mild_spicy': 'Cay nh·∫π',
            'spicy_options.normal_spicy': 'Cay v·ª´a'
        };

        function getTranslation(key) {
            return translations[key] || key;
        }

        function getItemTranslationById(id) {
            // Mock translations cho fish hotpot
            const fishTranslations = {
                'fish_hotpot_ca_chim': 'C√° Chim',
                'fish_hotpot_ca_mam_thau': 'C√° M√¢m Th√¢u',
                'fish_hotpot_ca_bop': 'C√° B·ªõp',
                'fish_hotpot_ca_mu': 'C√° M√∫',
                'fish_hotpot_ca_duoi': 'C√° ƒêu·ªëi',
                'fish_hotpot_ca_cu': 'C√° Cu'
            };
            return fishTranslations[id] || id;
        }

        function formatDisplayPrice(price) {
            return price.toLocaleString('vi-VN');
        }

        function openFishHotpotModal() {
            const itemDetailModal = document.getElementById('item-detail-modal');
            const itemDetailBody = document.getElementById('item-detail-body');
            const itemDetailClose = document.getElementById('item-detail-close');

            itemDetailBody.innerHTML = '';
            
            // T·∫°o image div
            const imageDiv = document.createElement('div');
            imageDiv.className = 'item-detail-image';
            imageDiv.style.backgroundImage = `url('${fishHotpotItem.image}')`;
            
            // T·∫°o info div
            const infoDiv = document.createElement('div');
            infoDiv.className = 'item-detail-info';
            
            // T√™n m√≥n
            const nameH2 = document.createElement('h2');
            nameH2.className = 'item-detail-name';
            nameH2.textContent = 'L·∫©u C√°';
            infoDiv.appendChild(nameH2);

            // X·ª≠ l√Ω options
            const optionsCount = fishHotpotItem.options.length;
            const shouldUseDropdown = optionsCount > 3;
            
            // T·∫°o options list (buttons)
            const optionsList = document.createElement('div');
            optionsList.className = 'item-options-list';
            
            // T·∫°o dropdown
            const optionsDropdown = document.createElement('select');
            optionsDropdown.className = 'item-options-dropdown';
            
            // Th√™m class d·ª±a tr√™n s·ªë l∆∞·ª£ng options
            if (shouldUseDropdown) {
                optionsList.classList.add('many-options');
                optionsDropdown.classList.add('many-options');
            } else {
                optionsList.classList.add('few-options');
                optionsDropdown.classList.add('few-options');
            }
            
            // T·∫°o buttons
            fishHotpotItem.options.forEach((opt, index) => {
                const optionBtn = document.createElement('button');
                optionBtn.className = 'item-option-btn';
                if (index === 0) optionBtn.classList.add('active');
                optionBtn.dataset.optionId = opt.id;
                optionBtn.dataset.price = opt.price;
                optionBtn.dataset.size = opt.size;
                const displayName = getItemTranslationById(opt.id) || opt.size;
                optionBtn.textContent = `${displayName} - ${formatDisplayPrice(opt.price)}ƒë`;
                optionsList.appendChild(optionBtn);
            });
            
            // T·∫°o options cho dropdown
            fishHotpotItem.options.forEach((opt, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.dataset.optionId = opt.id;
                option.dataset.price = opt.price;
                option.dataset.size = opt.size;
                const displayName = getItemTranslationById(opt.id) || opt.size;
                option.textContent = `${displayName} - ${formatDisplayPrice(opt.price)}ƒë`;
                optionsDropdown.appendChild(option);
            });
            
            // Th√™m v√†o DOM
            infoDiv.appendChild(optionsList);
            infoDiv.appendChild(optionsDropdown);
            
            // N√∫t th√™m v√†o gi·ªè
            const addBtn = document.createElement('button');
            addBtn.className = 'item-detail-add-btn';
            let selectedOption = fishHotpotItem.options[0];
            
            const updatePrice = () => {
                addBtn.textContent = `${getTranslation('add_to_cart')} - ${formatDisplayPrice(selectedOption.price)}ƒë`;
            };
            
            // X·ª≠ l√Ω s·ª± ki·ªán cho buttons
            optionsList.querySelectorAll('.item-option-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    optionsList.querySelector('.item-option-btn.active')?.classList.remove('active');
                    btn.classList.add('active');
                    selectedOption = {
                        id: btn.dataset.optionId,
                        price: Number(btn.dataset.price),
                        size: btn.dataset.size
                    };
                    updatePrice();
                });
            });
            
            // X·ª≠ l√Ω s·ª± ki·ªán cho dropdown
            optionsDropdown.addEventListener('change', () => {
                const selectedIndex = optionsDropdown.value;
                const selectedOpt = fishHotpotItem.options[selectedIndex];
                selectedOption = {
                    id: selectedOpt.id,
                    price: selectedOpt.price,
                    size: selectedOpt.size
                };
                updatePrice();
            });
            
            // Th√™m spacer v√† n√∫t
            const spacerDiv = document.createElement('div');
            spacerDiv.style.flex = '1';
            spacerDiv.style.minHeight = '20px';
            infoDiv.appendChild(spacerDiv);
            infoDiv.appendChild(addBtn);
            
            // Th√™m v√†o body
            itemDetailBody.appendChild(imageDiv);
            itemDetailBody.appendChild(infoDiv);
            
            // Hi·ªÉn th·ªã modal
            itemDetailModal.style.display = 'flex';
            
            // X·ª≠ l√Ω ƒë√≥ng modal
            itemDetailClose.addEventListener('click', () => {
                itemDetailModal.style.display = 'none';
            });
            
            // ƒê√≥ng modal khi click b√™n ngo√†i
            itemDetailModal.addEventListener('click', (e) => {
                if (e.target === itemDetailModal) {
                    itemDetailModal.style.display = 'none';
                }
            });
            
            updatePrice();
        }

        function checkOrientation() {
            const orientation = window.screen.orientation.type;
            const width = window.innerWidth;
            const height = window.innerHeight;
            const isLandscape = orientation.includes('landscape') || width > height;
            const isMobile = width <= 1024;
            
            document.getElementById('orientation-status').textContent = 
                `${orientation} (${isLandscape ? 'Landscape' : 'Portrait'})`;
            
            document.getElementById('screen-size').textContent = 
                `${width}px √ó ${height}px`;
            
            let expectedResult = '';
            if (isLandscape && isMobile) {
                expectedResult = 'Dropdown (v√¨ c√≥ 6 options > 3)';
            } else {
                expectedResult = 'Buttons (3 buttons/h√†ng)';
            }
            
            document.getElementById('expected-result').textContent = expectedResult;
        }

        function toggleOrientation() {
            // Ch·ªâ ho·∫°t ƒë·ªông trong Developer Tools
            if (window.innerWidth <= 1024) {
                alert('Vui l√≤ng s·ª≠ d·ª•ng Developer Tools ƒë·ªÉ test orientation!');
                return;
            }
            
            // Toggle gi·ªØa portrait v√† landscape
            const currentWidth = window.innerWidth;
            const currentHeight = window.innerHeight;
            
            if (currentWidth > currentHeight) {
                // ƒêang landscape, chuy·ªÉn sang portrait
                window.resizeTo(currentHeight, currentWidth);
            } else {
                // ƒêang portrait, chuy·ªÉn sang landscape
                window.resizeTo(currentHeight, currentWidth);
            }
            
            setTimeout(checkOrientation, 100);
        }

        // Ki·ªÉm tra orientation khi load trang
        document.addEventListener('DOMContentLoaded', () => {
            checkOrientation();
            
            // Ki·ªÉm tra khi resize
            window.addEventListener('resize', checkOrientation);
            
            // Ki·ªÉm tra khi orientation change
            window.addEventListener('orientationchange', () => {
                setTimeout(checkOrientation, 100);
            });
        });
    </script>
</body>
</html> 